package testcases;

import org.junit.runner.RunWith;

import cucumber.api.java.After;
import cucumber.api.java.Before;
import cucumber.api.java.en.And;
import cucumber.api.java.en.Given;
import cucumber.api.java.en.Then;
import cucumber.api.java.en.When;
import io.restassured.RestAssured;
import net.serenitybdd.junit.runners.SerenityRunner;
import net.thucydides.core.annotations.Steps;
import net.thucydides.junit.annotations.Concurrent;
import net.thucydides.junit.annotations.UseTestDataFrom;
import steps.ApiSteps;

@RunWith(SerenityRunner.class)
@UseTestDataFrom("./src/test/resources/testdata/api_details.csv")
public class Tests {
	
	
	private String apiKey;
	private String searchtext;
	private String limit;
	
	public void setApiKey(String apiKey) {
		this.apiKey = apiKey;
	}

	public void setSearchtext(String searchtext) {
		this.searchtext = searchtext;
	}

	public void setLimit(String limit) {
		this.limit = limit;
	}


	@Steps
	ApiSteps apiSteps;

	@Before
	public static void init() {
		
		RestAssured.baseURI="https://api.giphy.com";
		RestAssured.basePath="v1/gifs/";
		
	}
	
	@After
	public static void tear() {
		RestAssured.reset();
	}
	
	@Given("^user search for gif using search text$")
	public void createRequest() {
		
	}
	
	@When("^user send a get request")
	public void getGifDetails(String searchText) {
		apiSteps.getResponse(searchText);
	}
	
	@Then("^user should get API status code as (.*)$")
	public void validateStatusCode(int status) {
		apiSteps.validateStatusCode(status);
	}
	
	@And("^user get response")
	public void verifyResponse(String key, String text) {
		apiSteps.verifyResponseBody(text, text);
	}

}
